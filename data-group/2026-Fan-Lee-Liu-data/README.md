# Data: Exercise ECG Processing Dataset (Bike Experiment)

**Group:** 2026-Fan-Lee-Liu  
**Members:** Cheng-Yu Fan, Po-Lin Lee, Wu-Jun Liu  
**License:** CC-BY-4.0  

---

## Source

This dataset consists of **original ECG recordings collected during bicycle exercise experiments**.

* **Dataset Name:** Bike Exercise ECG Data
* **Origin:** Self-collected / Laboratory Data
* **Context:** ECG signals recorded during different exercise intensity levels (Level 3, Level 5).
* **Original Date:** January 2026

---

## Statistics

| Property | Value |
| :--- | :--- |
| **Subjects** | Experimental Subject(s) |
| **Data Type** | **Continuous Recording (Time-series)** |
| **Data Length** | ~20,000 data points per file |
| **Sampling Rate** | 125 Hz |
| **Conditions** | **Exercise Stress (Level 3, Level 5)** |
| **Total Files** | 2 files (in this sample batch) |

---

## Data Description

This submission contains ECG signals **processed from raw binary alignment files**. The data represents physiological responses under varying physical loads.

The purpose is to demonstrate **batch signal processing**, noise filtering (removing motion artifacts), and R-wave peak detection using Python.

---

## Folder Structure

```text
2026-Fan-Liu-Lee/
├── README.md
├── processing_code.py          # The Python script for batch processing
├── raw/                        # Folder containing original CSV files
│   ├── 125_bike_level3_20260113_172741_extended_poll.bin_align.csv
│   └── 125_bike_level5_20260113_171555_extended_poll.bin_align.csv
└── processed/                  # Folder generated by the script
    ├── processed_125_bike_level3_....csv
    └── processed_125_bike_level5_....csv
```

### Format & Files

#### 1. `raw/` Files
* **Description:** Raw CSV exports from the recording device (Bicycle Experiment).
* **Format:** Multi-column CSV (No Header).
* **Structure:**
    * **Column 0:** Sample Index / ID
    * **Column 1:** Timestamp (Microseconds/System Time)
    * **Column 3 (Target):** Raw ECG Sensor Data (Selected for processing)
    * **Other Columns:** Additional sensor channels (ignored in this pipeline).

#### 2. `processed/` Files
These files are generated automatically by the Python script `processing_code.py` and saved in the `processed/` folder.

| Column | Type | Unit | Description |
| :--- | :--- | :--- | :--- |
| `Time_Seconds` | float | s | Time axis generated at 125Hz |
| `ECG_Raw` | float | - | Raw signal extracted from Column 3 |
| `ECG_Filtered` | float | - | Signal after Pan-Tompkins cleaning (Bandpass 0.5-40Hz) |
| `R_Peak_Marker` | int | Binary | 1 = Detected R-peak, 0 = Non-peak |

---

## Preprocessing

The following preprocessing steps were applied using **Python** and **NeuroKit2**:

1.  **Batch Loading:** The script automatically scans the `raw/` folder for all CSV files (e.g., `*level3*.csv`, `*level5*.csv`).
2.  **Column Extraction:** Extracts the specific column (Index 3) containing ECG data from the multi-column raw files.
3.  **Interpolation:** Handles missing values or NaNs in the raw stream to ensure signal continuity.
4.  **Cleaning:** Applied `nk.ecg_clean` (Pan-Tompkins method) to remove motion artifacts, baseline wander, and high-frequency noise common in exercise data.
5.  **Peak Detection:** R-peaks were identified using the **Pan-Tompkins algorithm** (`nk.ecg_peaks`).
6.  **Export:** Processed data is saved to `processed/` with standardized headers and time axes.

---

## Privacy Statement

**CRITICAL: No Personally Identifiable Information (PII)**

* This dataset contains physiological signals only.
* **Filenames contain timestamps but no subject names.**
* Data is used strictly for academic and educational purposes.

---

## Usage

### Load a processed file

```python
import pandas as pd
import matplotlib.pyplot as plt

# Load one of the processed files (update filename as needed)
# Example file from the processed folder
file_path = "processed/processed_125_bike_level3_20260113_172741_extended_poll.bin_align.csv"

try:
    df = pd.read_csv(file_path)

    # Extract data columns
    time = df["Time_Seconds"]
    ecg_filtered = df["ECG_Filtered"]
    r_peaks = df["R_Peak_Marker"]

    print(f"Loaded {len(df)} samples from {file_path}")

    # Simple Plot Visualization
    plt.figure(figsize=(12, 4))
    plt.plot(time, ecg_filtered, label='Filtered ECG', color='blue', linewidth=1)
    
    # Highlight R-Peaks
    peak_times = time[r_peaks == 1]
    peak_vals = ecg_filtered[r_peaks == 1]
    plt.scatter(peak_times, peak_vals, color='red', s=30, label='R-Peaks', zorder=5)

    plt.title("ECG Signal with Pan-Tompkins Peak Detection")
    plt.xlabel("Time (seconds)")
    plt.ylabel("Amplitude")
    plt.legend()
    plt.grid(True, linestyle='--', alpha=0.6)
    plt.show()

except FileNotFoundError:
    print("File not found. Please run the processing script first.")
```
## Tools & Environment

* **Language:** Python 3.x
* **Development Environment:** VS Code / Google Colab / Jupyter Notebook
* **Key Libraries:**
  * `neurokit2` (For Pan-Tompkins algorithm implementation)
  * `pandas` (For data manipulation and CSV I/O)
  * `numpy` (For numerical operations)
  * `matplotlib` (For signal visualization)

---

## License

**Data Usage:**
The raw ECG datasets (`raw/`) are provided by **Group 2026-Fan-Lee-Liu** exclusively for educational and demonstration purposes within this project.

**Code & Documentation:**
The processing scripts, algorithms, and documentation (`README.md`) are licensed under **CC-BY-4.0**.

Under this license, you are free to:
* **Share** — copy and redistribute the material in any medium or format.
* **Adapt** — remix, transform, and build upon the material for any purpose, even commercially.

**Attribution:**
If you use this dataset or code, please credit **Group 2026-Fan-Lee-Liu (Cheng-Yu Fan, Po-Lin Lee, Wu-Jun Liu)**.

---

## Contact

For any questions regarding the dataset or the processing pipeline, please contact the group members directly.